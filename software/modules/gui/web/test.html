<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="w3css/w3pro.css">
<link rel="stylesheet" href="w3css/w3-theme-teal.css">
<body>

<nav class="w3-sidebar w3-bar-block w3-card" id="mySidebar">
<div class="w3-container w3-theme-d2">
  <span onclick="closeSidebar()" class="w3-button w3-display-topright w3-xxxlarge">X</span>
  <br>
  <div class="w3-padding w3-center">
    <img class="w3-circle" src="logo.png" alt="ecorobotix" style="width:75%">
  </div>
</div>
  <a class="w3-bar-item w3-button" href="index.html">Status</a>
  <a class="w3-bar-item w3-button" href="control.html">Control</a>
  <a class="w3-bar-item w3-button" href="mission.html">Mission</a>
  <a class="w3-bar-item w3-button" href="test.html">Test</a>
</nav>

<header class="w3-bar w3-card w3-theme">
  <button class="w3-bar-item w3-button w3-xxxlarge w3-hover-theme" onclick="openSidebar()">&#9776;</button>
  <h1 class="w3-bar-item">Test</h1>
</header>

<!-- Start page content -->



<div class="w3-container w3-border">
<p id="connection_status">?</p>
</div>
<div class="w3-container w3-border">
<p id="message_from_srv"> waiting for server answer</p>
</div>
<div class="w3-container w3-border">
<p id="demo">Click me.</p>
</div>
<div class="w3-container">
  <button onclick="btnclicked()">Click me</button>
</div>


<script>
document.getElementById("demo").addEventListener("click", myFunction);
function myFunction() {
  document.getElementById("demo").innerHTML = "YOU CLICKED ME!";
}

function btnclicked(){
  document.getElementById("demo").innerHTML = "message sent";
  ws.send("button clicked");
}


var ws;
window.onload=function(){
  ws=new WebSocket("ws://localhost:1234/echo");
  ws.onmessage=function(evt){
    console.log(evt.data);
    document.getElementById("message_from_srv").innerHTML = evt.data;
    };
  ws.onopen=function(evt){
    ws.send("Hello from web");
    document.getElementById("connection_status").innerHTML = "Connected";
  }
  ws.onerror=function(evt){
    document.getElementById("connection_status").innerHTML = "Connection error";
  }
  
}
window.onclose=function(){
  ws.close();
}  

</script>
<!-- End page content -->

<footer class="w3-container w3-theme w3-margin-top w3-bottom">
  <h3>Footer</h3>
</footer>

<script>
closeSidebar();
function openSidebar() {
  document.getElementById("mySidebar").style.display = "block";
}

function closeSidebar() {
  document.getElementById("mySidebar").style.display = "none";
}
</script>

</body>
